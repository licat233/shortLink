var loginbtnE=document.getElementById("loginbtn"),userE=document.getElementById("user");userE.onchange=verify;var passE=document.getElementById("pass");passE.onchange=verify;var autoE=document.getElementById("check"),alertE=document.getElementById("alert");function verify(){0!==this.value.trim().length?this.classList.remove("error"):this.classList.add("error")}function Login(){if(!loginbtnE.dataset.state){loginbtnE.dataset.state=!0;var myHeaders=new Headers;myHeaders.append("Content-Type","application/json");var raw=JSON.stringify({Username:userE.value,Password:passE.value,AutoLogin:autoE.checked}),requestOptions;fetch("/luck/login/verify",{method:"POST",headers:myHeaders,body:raw,redirect:"follow"}).then(response=>response.json()).then(result=>{try{if(alertE.innerText=result.message,200!==result.code)return loginbtnE.dataset.state=!1,void alertE.classList.add("errortxt");alertE.classList.remove("errortxt");var tokenData=JSON.stringify(result.data);localStorage.setItem("luckToken",tokenData),location.href="/luck/admin"}catch(error){loginbtnE.dataset.state=!1,alertE.innerText=error,alertE.classList.add("errortxt"),console.log(error)}}).catch(error=>{console.log("error",error),loginbtnE.dataset.loginState=0})}}loginbtnE.addEventListener("click",Login);